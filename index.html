<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–°–µ—Ä–∏–∞–ª—ã –¢–û–ü-250</title>
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#0B0F14">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–°–µ—Ä–∏–∞–ª—ã –¢–û–ü-250">
    
    <!-- –ú–∞–Ω–∏—Ñ–µ—Å—Ç PWA -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogItCh0LXRgNC40LDQu9GLINCi0J7Qny0yNTAiLAogICJzaG9ydF9uYW1lIjogItCh0LXRgNC40LDQu9GLIiwKICAiZGVzY3JpcHRpb24iOiAi0JLQuNC60YLQvtGA0LjQvdCwINC/0L4g0LvRg9GH0YjQuNC8INGB0LXRgNC40LDQu9Cw0Lwg0JrQuNC90L7Qn9C+0LjRgdC60LAiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzBCMEYxNCIsCiAgInRoZW1lX2NvbG9yIjogIiMwQjBGMTQiLAogICJvcmllbnRhdGlvbiI6ICJwb3J0cmFpdCIsCiAgImljb25zIjogWwogICAgeyAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1USTRJaUJvWldsbmFIUTlJakV5T0NJZ2RtbGxkMEp2ZUQwaU1DQXdJREV5T0NBeU9DSWdabWxzYkQwaUl6QkNNRVl4TkNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0OGNtVmpkQ0IzYVdSMGFEMGlNVEk0SWlCb1pXbG5hSFE5SWpFeU9DSWdabWxzYkQwaUkwWkdORVEwUkNJdkBqOGRHVjRkQ0IzYVdSMGFEMGlNVEk0SWlCb1pXbG5hSFE5SWpFeU9DSWdkbUZzYVdkdVBTSnRhV1JrYkdVaUlHWnBiR3c5SWlObVptWm1abVlpSUdadmJuUXRjMmw2WlQwaU5EaHdlQ0krUUVwRlRreDBiMmd0TlNJOEwzUmxlSFErUEM5emRtYytJaXdnSW5SNWNHVWlPaUFpYVcxaFoyVXZjM1puSzNodGJDSXNJQ0p6YVhwbGN5STZMQ0E0SWl3Z01USTRJaXdnTWpVMklpd2dOVEV5ZlYwc0NpQWlhV052Ym5OZlptOU55R0ZrWkdWeVgyRndjQ0k2SUZ0N0lpSnpjbU1pT2lBaVpHRjBZVHBwYldGblpTOXdibWM3WW1GelpUWTBMa2xXUWs5eVJ6QXNSRUJ5UVU5VGNGaEJlVVF3T0VselpIcGFNeTl3UVVSblJrRkdjbnAwUjBOSWRucG9UMk5mYkU0eWVUSm9kbUp4ZGxOblJXNWZaR1pqVlVaUlRFOWFiV3hzUmtoUGQydHdOSE00VGxKNGIzVnZYMVpOTXpkaGJXWkJWa2MzVFVGSU5USXRNM3BVTTFOaVZWTXZVVVE1U1VwUlpXOVRWRU5rVVV0amJUQlVTbFZzUlZOb1dYQTNhV3RuTW5Sb1RUVnZVa3RHZERGYVpVOWpUMWRZYVZwU1NHdDFWRTh2Y3preGNXRlVZazVzVUhsUlZYaHliV3BrZEdKdllqQXJkMDFmVm1oSFNXbFZOVzU1TWxoNFRHTnNZMWxaYVc5bGRHeDJWU0lzSUNKemRHRnlkRjkxY213aU9pQWlMaUlzSUNKa2FYTndiR0Y1SWpvZ0luTjBZVzVrWVd4dmJtVWlMQ0FpZEhsd1pTSTZJQ0pwYldGblpTOXdibWNpZlMxZDdDaUFpY21GdVoyVmZhVzVmWW1GemJ6WWlPaUJ3YlRVMUwydExka051UkVkaE1XRnNWR2RJY0hjN1Y0MFRBZ3JLWjROR28vdWc4enFIUTVKS2EwN3FJQnRKSGtNdjYrMlFRaVc4dmJRU25kVG0rR3Q4QVZ1SHhUUVBSaW8zLzVZQ2pjckxEenU1ckMrakc1cVV3PT0iLAogICAgImNoQ0F1cm4wNllGdTZXdUdHc0VxMjNlUzFVb1Y5aWJJc1h5L1FpbkdNb1FrWlYzdG14anErc2JaYjZIaWFuQXB5ZHhZWldVeXY5cGRLNDZHK29OOFFPRVJyNk16NWNrZ3JRM1NGMit0MlkwV0tKQ0pHd0FBQUFBQVNVVk9SSzVDWUlJPSIsICJ0eXBlIjogImltYWdlL3BuZyIsICJzaXplcyI6ICIxOTJ4MTkyIn0sCiAgICB7ICJzcmMiOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFIZ0FBQUI0Q0FZQUFBQ+f+7sTGUUFBTGlJaWNIZGxVSjFHZUVFVHFNcjNWS+Y3s2ZBanJuTjdpQTdYaWhtOE9mZHYrV1dSVjV0cWo+c2FCT0lJZDU4a1VnMi9YNkhDdHN6T1h5ak9sUUdPRkx4SjlSQklZTWZKbGlFZktxU1hvUGE+YVorZ2VIVzJzQlJKSEVGTGFGa09rY2o2eFhhTFNreUh1dHBJZ2hBQ2hMUWRzR0lWZXdjQ0d1Sk9oMXRGMk9RRUhJbUQrZWErQmlnS0FGRFQ+KuAzWStSVGUvMjE4SERZelVzWmdYUXkyQ20vWnMwT3lsWWgrczV5N2hGWEswYUtVUFF3eFEyRzk5c0ZaRkkrSW9xU2txdVVJZWFJQ+BWJPWktoS0xtKy5ZcmcjY9PSIsICJ0eXBlIjogImltYWdlL3BuZyIsICJzaXplcyI6ICIxOTJ4MTkyIn0KICBdLAogICJjYXRlZ29yaWVzIjogWyJnYW1lcyIsICJlbnRlcnRhaW5tZW50Il0KfQ==">
    
    <!-- –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAyOCIgZmlsbD0iIzBCMEYxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgZmlsbD0iI0ZGNEQ0RCIvPjx0ZXh0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2YWxpZ249Im1pZGRsZSIgZmlsbD0iI2ZmZmZmZiIgZm9udC1zaXplPSI0OHB4Ij5AQUE8L3RleHQ+PC9zdmc+">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0B0F14 0%, #1F2937 50%, #0B0F14 100%);
            color: #E2E8F0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        .card {
            background: rgba(31, 41, 55, 0.5);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 32px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn {
            padding: 20px 32px;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            min-height: 60px;
            touch-action: manipulation;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #FF4D4D, #FF6B6B);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #7FB2FF, #60A5FA);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(45deg, #10B981, #34D399);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(45deg, #F59E0B, #FBBF24);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #EF4444, #F87171);
            color: white;
        }
        
        .btn-gray {
            background: linear-gradient(45deg, #6B7280, #9CA3AF);
            color: white;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .title {
            font-size: 64px;
            font-weight: 700;
            background: linear-gradient(45deg, #FF4D4D, #7FB2FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .subtitle {
            font-size: 24px;
            color: #9CA3AF;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .grid {
            display: grid;
            gap: 20px;
        }
        
        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        
        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
        
        .game-header {
            background: rgba(31, 41, 55, 0.7);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-label {
            font-size: 14px;
            color: #9CA3AF;
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
        }
        
        .progress-bar {
            background: #374151;
            border-radius: 8px;
            height: 8px;
            margin-top: 16px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(45deg, #7FB2FF, #A855F7);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .question-card {
            background: rgba(31, 41, 55, 0.5);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
        }
        
        .question-text {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 32px;
            line-height: 1.4;
        }
        
        .answer-btn {
            width: 100%;
            padding: 20px;
            margin: 8px 0;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            background: rgba(55, 65, 81, 0.7);
            color: white;
            text-align: left;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .answer-btn:hover {
            background: rgba(75, 85, 99, 0.8);
            transform: translateY(-2px);
        }
        
        .answer-btn.correct {
            background: linear-gradient(45deg, #10B981, #34D399);
            animation: correctPulse 0.6s ease-out;
        }
        
        .answer-btn.incorrect {
            background: linear-gradient(45deg, #EF4444, #F87171);
            animation: incorrectShake 0.6s ease-out;
        }
        
        .answer-btn.hidden {
            background: rgba(55, 65, 81, 0.3);
            color: #6B7280;
            cursor: not-allowed;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .timer {
            font-size: 32px;
            font-weight: 700;
            color: #FF4D4D;
        }
        
        .timer.warning {
            animation: timerPulse 1s infinite;
        }
        
        @keyframes timerPulse {
            0%, 100% { color: #FF4D4D; }
            50% { color: #FCA5A5; }
        }
        
        .hints {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .hint-btn {
            padding: 12px 20px;
            font-size: 14px;
            border-radius: 8px;
        }
        
        .fact-box {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .fact-label {
            font-size: 14px;
            color: #93C5FD;
            margin-bottom: 8px;
        }
        
        .fact-text {
            color: #DBEAFE;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-4 {
            margin-bottom: 16px;
        }
        
        .mb-8 {
            margin-bottom: 32px;
        }
        
        .space-y-4 > * + * {
            margin-top: 16px;
        }
        
        .space-y-8 > * + * {
            margin-top: 32px;
        }
        
        .input, .textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #374151;
            border-radius: 8px;
            background: #374151;
            color: white;
            font-size: 16px;
        }
        
        .textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .editor-form {
            background: rgba(55, 65, 81, 0.5);
            border-radius: 12px;
            padding: 24px;
        }
        
        .question-list {
            max-height: 400px;
            overflow-y: auto;
            border-radius: 8px;
        }
        
        .question-item {
            background: rgba(55, 65, 81, 0.5);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }
        
        .leaderboard-item {
            background: rgba(55, 65, 81, 0.5);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .leaderboard-item.gold {
            background: linear-gradient(45deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.2));
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        
        .leaderboard-item.silver {
            background: linear-gradient(45deg, rgba(156, 163, 175, 0.2), rgba(107, 114, 128, 0.2));
            border: 1px solid rgba(156, 163, 175, 0.3);
        }
        
        .leaderboard-item.bronze {
            background: linear-gradient(45deg, rgba(251, 146, 60, 0.2), rgba(249, 115, 22, 0.2));
            border: 1px solid rgba(251, 146, 60, 0.3);
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 48px;
            }
            
            .question-text {
                font-size: 24px;
            }
            
            .game-header {
                flex-direction: column;
                text-align: center;
            }
            
            .hints {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
        <div id="welcome-screen" class="screen active">
            <div class="container">
                <div class="text-center slide-in" style="min-height: 100vh; display: flex; flex-direction: column; justify-content: center;">
                    <h1 class="title">–°–ï–†–ò–ê–õ–´ –¢–û–ü-250</h1>
                    <p class="subtitle">–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø–æ –ª—É—á—à–∏–º —Å–µ—Ä–∏–∞–ª–∞–º –ö–∏–Ω–æ–ü–æ–∏—Å–∫–∞</p>
                    
                    <div class="space-y-4" style="max-width: 400px; margin: 0 auto;">
                        <button class="btn btn-primary" style="width: 100%;" onclick="startGame('single')">
                            üéÆ –ò–ì–†–ê–¢–¨
                        </button>
                        <button class="btn btn-secondary" style="width: 100%;" onclick="startGame('party')">
                            üéâ PARTY –†–ï–ñ–ò–ú
                        </button>
                        <button class="btn" style="width: 100%; background: linear-gradient(45deg, #A855F7, #8B5CF6);" onclick="showScreen('editor')">
                            ‚úèÔ∏è –†–ï–î–ê–ö–¢–û–†
                        </button>
                        <button class="btn btn-gray" style="width: 100%;" onclick="showScreen('rules')">
                            üìã –ü–†–ê–í–ò–õ–ê
                        </button>
                        <button class="btn btn-warning" style="width: 100%;" onclick="showScreen('leaderboard')">
                            üèÜ –õ–ò–î–ï–†–´
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª -->
        <div id="rules-screen" class="screen">
            <div class="container">
                <button class="btn btn-gray mb-8" onclick="showScreen('welcome')">‚Üê –ù–∞–∑–∞–¥</button>
                
                <div class="card">
                    <h2 class="text-center mb-8" style="font-size: 48px; font-weight: 700;">üìã –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
                    
                    <div class="grid grid-2">
                        <div class="space-y-4">
                            <h3 style="font-size: 24px; font-weight: 600; color: #FF6B6B;">üéØ –ì–µ–π–º–ø–ª–µ–π</h3>
                            <ul style="color: #D1D5DB; line-height: 1.8;">
                                <li>‚Ä¢ 5 —Ä–∞—É–Ω–¥–æ–≤ –ø–æ 10 –≤–æ–ø—Ä–æ—Å–æ–≤</li>
                                <li>‚Ä¢ –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç —Å –∫–∞–∂–¥—ã–º —Ä–∞—É–Ω–¥–æ–º</li>
                                <li>‚Ä¢ –¢–∞–π–º–µ—Ä: 20‚Üí18‚Üí16‚Üí14‚Üí12 —Å–µ–∫—É–Ω–¥</li>
                                <li>‚Ä¢ –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</li>
                            </ul>
                        </div>
                        
                        <div class="space-y-4">
                            <h3 style="font-size: 24px; font-weight: 600; color: #60A5FA;">üíé –û—á–∫–∏</h3>
                            <ul style="color: #D1D5DB; line-height: 1.8;">
                                <li>‚Ä¢ –ë–∞–∑–æ–≤—ã–µ: 100 –æ—á–∫–æ–≤</li>
                                <li>‚Ä¢ –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∞—É–Ω–¥–∞: x1.0‚Üíx2.5</li>
                                <li>‚Ä¢ –ë–æ–Ω—É—Å –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å: –¥–æ x2.0</li>
                                <li>‚Ä¢ –®—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏: -20%</li>
                            </ul>
                        </div>
                        
                        <div class="space-y-4">
                            <h3 style="font-size: 24px; font-weight: 600; color: #A855F7;">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏</h3>
                            <ul style="color: #D1D5DB; line-height: 1.8;">
                                <li>‚Ä¢ 50/50: —É–±–∏—Ä–∞–µ—Ç 2 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö</li>
                                <li>‚Ä¢ +5 —Å–µ–∫: –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º—è</li>
                                <li>‚Ä¢ –§–∞–∫—Ç: –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</li>
                                <li>‚Ä¢ –õ–∏–º–∏—Ç: 3 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–π</li>
                            </ul>
                        </div>
                        
                        <div class="space-y-4">
                            <h3 style="font-size: 24px; font-weight: 600; color: #34D399;">üéâ –†–µ–∂–∏–º—ã</h3>
                            <ul style="color: #D1D5DB; line-height: 1.8;">
                                <li>‚Ä¢ –û–¥–∏–Ω–æ—á–Ω—ã–π: –∏–≥—Ä–∞–µ—Ç–µ —Å–∞–º–∏</li>
                                <li>‚Ä¢ Party: –∏–≥—Ä–æ–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏</li>
                                <li>‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è</li>
                                <li>‚Ä¢ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div id="game-screen" class="screen">
            <div class="container">
                <!-- –®–∞–ø–∫–∞ –∏–≥—Ä—ã -->
                <div class="game-header">
                    <h1 style="font-size: 24px; font-weight: 700;">–°–ï–†–ò–ê–õ–´ –¢–û–ü-250</h1>
                    <button class="btn btn-gray" onclick="showScreen('welcome')" style="padding: 8px 16px; font-size: 14px;">‚Üê –í—ã—Ö–æ–¥</button>
                </div>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="card mb-4">
                    <div class="grid grid-4 mb-4">
                        <div class="stat">
                            <div class="stat-label">–†–∞—É–Ω–¥</div>
                            <div class="stat-value" style="color: #60A5FA;" id="round-display">1/5</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">–í–æ–ø—Ä–æ—Å</div>
                            <div class="stat-value" style="color: #34D399;" id="question-display">1/10</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">–û—á–∫–∏</div>
                            <div class="stat-value" style="color: #FBBF24;" id="score-display">0</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">–í—Ä–µ–º—è</div>
                            <div class="stat-value timer" id="timer-display">20—Å</div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 2%;"></div>
                    </div>
                </div>

                <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
                <div class="hints">
                    <button class="btn hint-btn" style="background: #A855F7;" onclick="useHint('fiftyFifty')" id="hint-fifty">
                        50/50 (<span id="fifty-count">3</span>)
                    </button>
                    <button class="btn hint-btn" style="background: #10B981;" onclick="useHint('extraTime')" id="hint-time">
                        +5 —Å–µ–∫ (<span id="time-count">3</span>)
                    </button>
                    <button class="btn hint-btn" style="background: #F59E0B;" onclick="useHint('fact')" id="hint-fact">
                        –§–∞–∫—Ç (<span id="fact-count">3</span>)
                    </button>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å -->
                <div class="question-card">
                    <h2 class="question-text" id="question-text">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞...</h2>
                    
                    <div id="fact-box" class="fact-box" style="display: none;">
                        <div class="fact-label">üí° –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:</div>
                        <div class="fact-text" id="fact-text"></div>
                    </div>
                    
                    <div class="grid" id="answers-container">
                        <!-- –û—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                    
                    <div id="result-fact" class="fact-box" style="display: none; background: rgba(16, 185, 129, 0.2); border-color: rgba(16, 185, 129, 0.3);">
                        <div class="fact-label" style="color: #6EE7B7;">üí° –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:</div>
                        <div class="fact-text" style="color: #D1FAE5;" id="result-fact-text"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="results-screen" class="screen">
            <div class="container">
                <div class="card text-center">
                    <h1 class="mb-4" style="font-size: 48px; font-weight: 700; background: linear-gradient(45deg, #FBBF24, #F59E0B); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                        üéâ –ò–ì–†–ê –ó–ê–í–ï–†–®–ï–ù–ê!
                    </h1>
                    <div style="font-size: 72px; font-weight: 700; color: #FBBF24; margin-bottom: 8px;" id="final-score">0</div>
                    <div style="font-size: 24px; color: #D1D5DB; margin-bottom: 32px;">–æ—á–∫–æ–≤</div>

                    <div class="grid grid-2 mb-8">
                        <div style="background: rgba(16, 185, 129, 0.2); border-radius: 12px; padding: 24px;">
                            <div style="font-size: 36px; font-weight: 700; color: #34D399;" id="correct-answers">0/0</div>
                            <div style="color: #6EE7B7;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</div>
                            <div style="font-size: 24px; font-weight: 700; color: #34D399;" id="accuracy">0%</div>
                        </div>
                        <div style="background: rgba(59, 130, 246, 0.2); border-radius: 12px; padding: 24px;">
                            <div style="font-size: 36px; font-weight: 700; color: #60A5FA;" id="avg-time">0—Å</div>
                            <div style="color: #93C5FD;">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h3 style="font-size: 24px; font-weight: 600;">–î–µ—Ç–∞–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤</h3>
                        <div id="answers-details" class="question-list" style="max-height: 300px; text-align: left;">
                            <!-- –î–µ—Ç–∞–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                    </div>

                    <div class="space-y-4 mt-8">
                        <button class="btn btn-success" onclick="restartGame()">üéÆ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                        <button class="btn btn-warning" onclick="showScreen('leaderboard')">üèÜ –õ–∏–¥–µ—Ä—ã</button>
                        <button class="btn btn-gray" onclick="showScreen('welcome')">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ª–∏–¥–µ—Ä–æ–≤ -->
        <div id="leaderboard-screen" class="screen">
            <div class="container">
                <button class="btn btn-gray mb-8" onclick="showScreen('welcome')">‚Üê –ù–∞–∑–∞–¥</button>
                
                <div class="card">
                    <h2 class="text-center mb-8" style="font-size: 48px; font-weight: 700; background: linear-gradient(45deg, #FBBF24, #F59E0B); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                        üèÜ –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í
                    </h2>
                    
                    <div id="leaderboard-list">
                        <!-- –õ–∏–¥–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                    
                    <div class="text-center mt-8">
                        <button id="clear-leaderboard-btn" class="btn btn-danger">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
        <div id="editor-screen" class="screen">
            <div class="container">
                <button class="btn btn-gray mb-8" onclick="showScreen('welcome')">‚Üê –ù–∞–∑–∞–¥</button>
                
                <div class="card">
                    <h2 class="text-center mb-8" style="font-size: 48px; font-weight: 700;">‚úèÔ∏è –†–ï–î–ê–ö–¢–û–† –í–û–ü–†–û–°–û–í</h2>
                    
                    <!-- –í—ã–±–æ—Ä —Ä–∞—É–Ω–¥–∞ -->
                    <div class="mb-8">
                        <h3 style="font-size: 24px; font-weight: 600; margin-bottom: 16px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—É–Ω–¥:</h3>
                        <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                            <button class="btn" onclick="selectRound(1)" id="round-1" style="background: #60A5FA;">–†–∞—É–Ω–¥ 1 (20)</button>
                            <button class="btn" onclick="selectRound(2)" id="round-2" style="background: #6B7280;">–†–∞—É–Ω–¥ 2 (20)</button>
                            <button class="btn" onclick="selectRound(3)" id="round-3" style="background: #6B7280;">–†–∞—É–Ω–¥ 3 (0)</button>
                            <button class="btn" onclick="selectRound(4)" id="round-4" style="background: #6B7280;">–†–∞—É–Ω–¥ 4 (0)</button>
                            <button class="btn" onclick="selectRound(5)" id="round-5" style="background: #6B7280;">–†–∞—É–Ω–¥ 5 (0)</button>
                        </div>
                    </div>

                    <div class="grid grid-2">
                        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="editor-form">
                            <h3 style="font-size: 24px; font-weight: 600; margin-bottom: 16px;">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</h3>
                            
                            <div style="margin-bottom: 16px;">
                                <label style="display: block; font-weight: 500; margin-bottom: 8px;">–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:</label>
                                <textarea class="textarea" id="new-question-text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞..."></textarea>
                            </div>

                            <div style="margin-bottom: 16px;">
                                <label style="display: block; font-weight: 500; margin-bottom: 8px;">–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤:</label>
                                <div id="answer-options">
                                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                        <input type="radio" name="correct" value="0" checked>
                                        <input class="input" id="option-0" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 1..." style="flex: 1;">
                                    </div>
                                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                        <input type="radio" name="correct" value="1">
                                        <input class="input" id="option-1" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 2..." style="flex: 1;">
                                    </div>
                                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                        <input type="radio" name="correct" value="2">
                                        <input class="input" id="option-2" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 3..." style="flex: 1;">
                                    </div>
                                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                        <input type="radio" name="correct" value="3">
                                        <input class="input" id="option-3" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 4..." style="flex: 1;">
                                    </div>
                                </div>
                            </div>

                            <div style="margin-bottom: 16px;">
                                <label style="display: block; font-weight: 500; margin-bottom: 8px;">–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                                <textarea class="textarea" id="new-question-fact" placeholder="–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ –≤–æ–ø—Ä–æ—Å–µ..."></textarea>
                            </div>

                            <button class="btn btn-success" onclick="addQuestion()" style="width: 100%;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                        </div>

                        <!-- –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ -->
                        <div>
                            <h3 style="font-size: 24px; font-weight: 600; margin-bottom: 16px;" id="round-title">–†–∞—É–Ω–¥ 1 ‚Äî –õ—ë–≥–∫–∏–π</h3>
                            <div class="question-list" id="questions-list">
                                <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-8">
                        <button class="btn btn-secondary" onclick="saveQuestions()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å–æ–≤
        const defaultQuestions = {
            1: [
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–æ–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∫–∞–∫ –•–∞–π–∑–µ–Ω–±–µ—Ä–≥ –≤ ¬´–í–æ –≤—Å–µ —Ç—è–∂–∫–∏–µ¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–•—ç–Ω–∫ –®—Ä–µ–π–¥–µ—Ä", "–£–æ–ª—Ç–µ—Ä –£–∞–π—Ç", "–î–∂–µ–∫ –£—ç–ª–∫–µ—Ä", "–ì–µ–π–ª –ë–µ—Ç—Ç–∏–∫–µ—Ä"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 1,
                    —Ñ–∞–∫—Ç: "–•–∞–π–∑–µ–Ω–±–µ—Ä–≥ ‚Äî –ø—Å–µ–≤–¥–æ–Ω–∏–º –£–æ–ª—Ç–µ—Ä–∞ –£–∞–π—Ç–∞, –≤–∑—è—Ç—ã–π –≤ —á–µ—Å—Ç—å —Ñ–∏–∑–∏–∫–∞ –í–µ—Ä–Ω–µ—Ä–∞ –ì–µ–π–∑–µ–Ω–±–µ—Ä–≥–∞"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–í –∫–∞–∫–æ–º —Å–µ—Ä–∏–∞–ª–µ –≤–ø–µ—Ä–≤—ã–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è ¬´–ñ–µ–ª–µ–∑–Ω—ã–π —Ç—Ä–æ–Ω¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–í–∏–∫–∏–Ω–≥–∏", "–†–∏–º", "–î–æ–º –¥—Ä–∞–∫–æ–Ω–∞", "–ò–≥—Ä–∞ –ø—Ä–µ—Å—Ç–æ–ª–æ–≤"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 3,
                    —Ñ–∞–∫—Ç: "–ñ–µ–ª–µ–∑–Ω—ã–π —Ç—Ä–æ–Ω –±—ã–ª –≤—ã–∫–æ–≤–∞–Ω –∏–∑ –º–µ—á–µ–π –ø–æ–±–µ–∂–¥—ë–Ω–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤ –≠–π–≥–æ–Ω–∞ –ó–∞–≤–æ–µ–≤–∞—Ç–µ–ª—è"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–æ–π —Å–µ—Ä–∏–∞–ª —Å—Ç–∞–ª –∫—É–ª—å—Ç–æ–≤—ã–º –ø–æ—Ä—Ç—Ä–µ—Ç–æ–º –∂–∏–∑–Ω–∏ –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–π –º–∞—Ñ–∏–∏ –≤ –ù—å—é-–î–∂–µ—Ä—Å–∏?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ü–æ–¥–ø–æ–ª—å–Ω–∞—è –∏–º–ø–µ—Ä–∏—è", "–ë–æ—Ä–¥–∂–∏–∞", "–ö–ª–∞–Ω –°–æ–ø—Ä–∞–Ω–æ", "–ì–æ–º–æ—Ä—Ä–∞"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 2,
                    —Ñ–∞–∫—Ç: "¬´–ö–ª–∞–Ω –°–æ–ø—Ä–∞–Ω–æ¬ª —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –ª—É—á—à–∏—Ö —Å–µ—Ä–∏–∞–ª–æ–≤ –≤—Å–µ—Ö –≤—Ä–µ–º—ë–Ω"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ ¬´–û—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–µ –¥–µ–ª–∞¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–•–æ–∫–∏–Ω—Å", "–î–∞—Ä–∫–≤—É–¥", "–ú–∏–ª–ª—Ñ–∏–ª–¥", "–ë–ª—ç–∫—Ä–∏–¥–∂"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 0,
                    —Ñ–∞–∫—Ç: "–•–æ–∫–∏–Ω—Å ‚Äî –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π –≥–æ—Ä–æ–¥ –≤ —à—Ç–∞—Ç–µ –ò–Ω–¥–∏–∞–Ω–∞"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–æ–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è —É –∞–¥–≤–æ–∫–∞—Ç–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ –∑–Ω–∞—é—Ç –∫–∞–∫ –°–æ–ª–∞ –ì—É–¥–º–∞–Ω–∞?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–•–æ–≤–∞—Ä–¥ –•—ç–º–ª–∏–Ω", "–î–∂–∏–º–º–∏ –ú–∞–∫–≥–∏–ª–ª", "–ß—É–∫ –ú–∞–∫–≥–∏–ª–ª", "–ö–ª–∏—Ñ—Ñ –ú–µ–π–Ω"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 1,
                    —Ñ–∞–∫—Ç: "–î–∂–∏–º–º–∏ –ú–∞–∫–≥–∏–ª–ª –∏–∑–º–µ–Ω–∏–ª –∏–º—è –Ω–∞ –°–æ–ª –ì—É–¥–º–∞–Ω –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–í –∫–∞–∫–æ–º —Å–µ—Ä–∏–∞–ª–µ –≥–µ—Ä–æ–π –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–æ–º—ã –∏ —É–∑–Ω–∞—ë—Ç, —á—Ç–æ –º–∏—Ä –∑–∞—Ö–≤–∞—á–µ–Ω –∑–æ–º–±–∏?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["12 –æ–±–µ–∑—å—è–Ω", "–ú–≥–ª–∞", "–•–æ–¥—è—á–∏–µ –º–µ—Ä—Ç–≤–µ—Ü—ã", "–ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 2,
                    —Ñ–∞–∫—Ç: "–†–∏–∫ –ì—Ä–∞–π–º—Å –ø—Ä–æ—Å–Ω—É–ª—Å—è –ø–æ—Å–ª–µ –∫–æ–º—ã –≤ –±–æ–ª—å–Ω–∏—Ü–µ –∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª –∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–∞—è –∞–∫—Ç—Ä–∏—Å–∞ —Å—ã–≥—Ä–∞–ª–∞ –≥–µ–Ω–∏–∞–ª—å–Ω—É—é —à–∞—Ö–º–∞—Ç–∏—Å—Ç–∫—É –ë–µ—Ç –•–∞—Ä–º–æ–Ω?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–§–ª–æ—Ä–µ–Ω—Å –ü—å—é", "–°–æ—Ñ–∏ –ö—É–∫—Å–æ–Ω", "–°–∏–¥–Ω–∏ –°—É–∏–Ω–∏", "–ê–Ω—è –¢–µ–π–ª–æ—Ä-–î–∂–æ–π"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 3,
                    —Ñ–∞–∫—Ç: "¬´–•–æ–¥ –∫–æ—Ä–æ–ª–µ–≤—ã¬ª –ø—Ä–∏–≤—ë–ª –∫ –±—É–º—É –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —à–∞—Ö–º–∞—Ç–∞–º –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö—Ç–æ –∏—Å–ø–æ–ª–Ω–∏–ª —Ä–æ–ª—å –¥–æ–∫—Ç–æ—Ä–∞ –í–∞—Ç—Å–æ–Ω–∞ –≤ —Å–µ—Ä–∏–∞–ª–µ ¬´–®–µ—Ä–ª–æ–∫¬ª (BBC)?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ú–∞—Ä—Ç–∏–Ω –§—Ä–∏–º–∞–Ω", "–î–∂–µ–π–º—Å –ù–æ—Ä—Ç–æ–Ω", "–ü–æ–ª –ë–µ—Ç—Ç–∞–Ω–∏", "–î–æ–º–∏–Ω–∏–∫ –ö—É–ø–µ—Ä"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 0,
                    —Ñ–∞–∫—Ç: "–ú–∞—Ä—Ç–∏–Ω –§—Ä–∏–º–∞–Ω —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω —Ä–æ–ª—å—é –ë–∏–ª—å–±–æ –ë—ç–≥–≥–∏–Ω—Å–∞ –≤ ¬´–•–æ–±–±–∏—Ç–µ¬ª"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫ –∑–æ–≤—É—Ç –±—Ä–∞—Ç–∞, —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –ú–∞–π–∫–ª –°–∫–æ—Ñ–∏–ª–¥ –∑–∞—Ç–µ—è–ª –ø–æ–±–µ–≥?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–î–∂–æ–Ω –ê–±—Ä—É—Ü—Ü–∏", "–õ–∏–Ω–∫–æ–ª—å–Ω –ë–∞—Ä—Ä–æ—É–∑", "–§–µ—Ä–Ω–∞–Ω–¥–æ –°—É–∫—Ä–µ", "–¢–µ–æ–¥–æ—Ä –ë—ç–≥–≤–µ–ª–ª"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 1,
                    —Ñ–∞–∫—Ç: "–ú–∞–π–∫–ª —Å–¥–µ–ª–∞–ª —Ç–∞—Ç—É–∏—Ä–æ–≤–∫—É —Å –ø–ª–∞–Ω–æ–º —Ç—é—Ä—å–º—ã –Ω–∞ –≤—Å—ë–º —Ç–µ–ª–µ"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–í –∫–∞–∫–æ–º —Å–µ—Ä–∏–∞–ª–µ –¢–æ–º –•–∞—Ä–¥–∏ –∏–≥—Ä–∞–µ—Ç –î–∂–µ–π–º—Å–∞ –î–µ–ª—ç–π–Ω–∏?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–û—Å—Ç—Ä—ã–µ –∫–æ–∑—ã—Ä—å–∫–∏", "–ì–æ—Ä–æ–¥ –≤–∑–∞–ø–µ—Ä—Ç–∏", "–¢–∞–±—É", "–ü–∞–¥–µ–Ω–∏–µ"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 2,
                    —Ñ–∞–∫—Ç: "¬´–¢–∞–±—É¬ª —Å–æ–∑–¥–∞–ª —Å–∞–º –¢–æ–º –•–∞—Ä–¥–∏ –≤–º–µ—Å—Ç–µ —Å –æ—Ç—Ü–æ–º"
                }
            ],
            2: [
                {
                    —Ç–µ–∫—Å—Ç: "–í –∫–∞–∫–æ–º —Å–µ—Ä–∏–∞–ª–µ –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã–µ –∂–∏–≤—É—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–æ—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî —Ö–∏—Ç —Å–µ–∑–æ–Ω–∞¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ü–æ–±–µ–≥", "–¢—é—Ä—å–º–∞ –û–∑", "–û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî —Ö–∏—Ç —Å–µ–∑–æ–Ω–∞", "–ó–∞–∫–ª—é—á—ë–Ω–Ω—ã–µ"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 2,
                    —Ñ–∞–∫—Ç: "–°–µ—Ä–∏–∞–ª –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –º–µ–º—É–∞—Ä–∞—Ö –ü–∞–π–ø–µ—Ä –ö–µ—Ä–º–∞–Ω –æ –µ—ë –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ç—é—Ä—å–º–µ"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö—Ç–æ —Å—ã–≥—Ä–∞–ª –°–∞–Ω–¥–æ—Ä–∞ –ö–ª–∏–≥–∞–Ω–∞ (–ü—Å–∞) –≤ ¬´–ò–≥—Ä–µ –ø—Ä–µ—Å—Ç–æ–ª–æ–≤¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–†–æ—Ä–∏ –ú–∞–∫–ö–∞–Ω–Ω", "–ö–æ–Ω–ª–µ—Ç –•–∏–ª–ª", "–ö—Ä–∏—Å—Ç–æ—Ñ–µ—Ä –•–∏–≤—å—é", "–î–∂–µ—Ä–æ–º –§–ª–∏–Ω–Ω"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 0,
                    —Ñ–∞–∫—Ç: "–†–æ—Ä–∏ –ú–∞–∫–ö–∞–Ω–Ω ‚Äî —à–æ—Ç–ª–∞–Ω–¥—Å–∫–∏–π –∞–∫—Ç—ë—Ä —Ä–æ—Å—Ç–æ–º 198 —Å–º"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–∞—è —Å—Ç—Ä–∞–Ω–∞ —Å—Ç–∞–ª–∞ –º–µ—Å—Ç–æ–º –¥–µ–π—Å—Ç–≤–∏—è ¬´–ë—É–º–∞–∂–Ω–æ–≥–æ –¥–æ–º–∞¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ò—Ç–∞–ª–∏—è", "–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è", "–§—Ä–∞–Ω—Ü–∏—è", "–ò—Å–ø–∞–Ω–∏—è"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 3,
                    —Ñ–∞–∫—Ç: "–°–µ—Ä–∏–∞–ª —Å—Ç–∞–ª —Å–∞–º—ã–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –Ω–µ–∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–º —à–æ—É –Ω–∞ Netflix"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç ¬´–û—Å—Ç—Ä—ã–µ –∫–æ–∑—ã—Ä—å–∫–∏¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–õ–∏–≤–µ—Ä–ø—É–ª—å", "–ë–∏—Ä–º–∏–Ω–≥–µ–º", "–õ–∏–¥—Å", "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 1,
                    —Ñ–∞–∫—Ç: "–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–æ—Å–ª–µ–≤–æ–µ–Ω–Ω–æ–º –ë–∏—Ä–º–∏–Ω–≥–µ–º–µ 1920-—Ö –≥–æ–¥–æ–≤"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫ –∑–æ–≤—É—Ç –∂–µ–Ω—É –ì–æ–º–µ—Ä–∞ –°–∏–º–ø—Å–æ–Ω–∞?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ü—ç—Ç—Ç–∏", "–°–µ–ª—å–º–∞", "–ú–∞—Ä–¥–∂", "–≠–¥–Ω–∞"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 2,
                    —Ñ–∞–∫—Ç: "¬´–°–∏–º–ø—Å–æ–Ω—ã¬ª ‚Äî —Å–∞–º—ã–π –¥–æ–ª–≥–æ–∏–¥—É—â–∏–π –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–∏–∞–ª –≤ –∏—Å—Ç–æ—Ä–∏–∏"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–∞—è —ç–∫—Ä–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–æ–º–∞–Ω–∞ –ú–∞—Ä–≥–∞—Ä–µ—Ç –≠—Ç–≤—É–¥?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ü—Ä–∏—Å–ª—É–≥–∞", "–ö–æ–ª–µ—Å–æ –≤—Ä–µ–º–µ–Ω–∏", "–î–æ—á–µ—Ä–∏ –ê–Ω–∞—Ä—Ö–∏–∏", "–†–∞—Å—Å–∫–∞–∑ —Å–ª—É–∂–∞–Ω–∫–∏"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 3,
                    —Ñ–∞–∫—Ç: "–†–æ–º–∞–Ω –≠—Ç–≤—É–¥ –±—ã–ª –Ω–∞–ø–∏—Å–∞–Ω –≤ 1985 –≥–æ–¥—É –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª –º–Ω–æ–≥–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö—Ç–æ –∏—Å–ø–æ–ª–Ω–∏–ª —Ä–æ–ª—å –î–µ–∫—Å—Ç–µ—Ä–∞ –ú–æ—Ä–≥–∞–Ω–∞?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–ú–∞–π–∫–ª –°. –•–æ–ª–ª", "–î–∂–æ–Ω –•—ç–º–º", "–ü–∏—Ç–µ—Ä –ö—Ä–∞—É–∑–µ", "–î—ç–≤–∏–¥ –î—É—Ö–æ–≤–Ω—ã"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 0,
                    —Ñ–∞–∫—Ç: "–ú–∞–π–∫–ª –°. –•–æ–ª–ª —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω —Ä–æ–ª—å—é –î—ç–≤–∏–¥–∞ –§–∏—à–µ—Ä–∞ –≤ ¬´–ö–ª–∏–µ–Ω—Ç–µ –≤—Å–µ–≥–¥–∞ –º—ë—Ä—Ç–≤¬ª"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–µ—Ä–∏–∞–ª –æ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º –≥–æ—Ä–æ–¥–∫–µ –†–∏–≤–µ—Ä–¥–µ–π–ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–≠–π—Ñ–æ—Ä–∏—è", "–†–∏–≤–µ—Ä–¥–µ–π–ª", "–ú–∞–ª–µ–Ω—å–∫–∏–µ –ª–≥—É–Ω–∏—à–∫–∏", "–ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–µ —É–±–∏–π—Å—Ç–≤–∞"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 1,
                    —Ñ–∞–∫—Ç: "¬´–†–∏–≤–µ—Ä–¥–µ–π–ª¬ª –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∫–æ–º–∏–∫—Å–∞—Ö Archie Comics"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ–∏—Ç ¬´–°–µ–º—ë—Ä–∫–µ¬ª?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–û—Ö–æ—Ç–Ω–∏–∫–∏", "–ò–∑–≥–æ–∏", "–ü–∞—Ü–∞–Ω—ã", "–°—Ç–æ—Ä–æ–∂–µ–≤—ã–µ –ø—Å—ã"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 2,
                    —Ñ–∞–∫—Ç: "¬´–ü–∞—Ü–∞–Ω—ã¬ª ‚Äî —Å–∞—Ç–∏—Ä–∞ –Ω–∞ —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π—Å–∫–∏–µ —Ñ–∏–ª—å–º—ã –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –∫—É–ª—å—Ç—É—Ä—É"
                },
                {
                    —Ç–µ–∫—Å—Ç: "–ö–∞–∫–æ–π —Å–µ—Ä–∏–∞–ª –ø–æ—Å–≤—è—â—ë–Ω –ï–ª–∏–∑–∞–≤–µ—Ç–µ II?",
                    –≤–∞—Ä–∏–∞–Ω—Ç—ã: ["–í–∏–∫—Ç–æ—Ä–∏—è", "–ï–ª–∏–∑–∞–≤–µ—Ç–∞: –∑–æ–ª–æ—Ç–æ–π –≤–µ–∫", "–¢—é–¥–æ—Ä—ã", "–ö–æ—Ä–æ–Ω–∞"],
                    –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 3,
                    —Ñ–∞–∫—Ç: "¬´–ö–æ—Ä–æ–Ω–∞¬ª –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ –ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å 1940-—Ö –ø–æ 2000-–µ –≥–æ–¥—ã"
                }
            ],
            3: [],
            4: [],
            5: []
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            currentRound: 1,
            currentQuestion: 0,
            score: 0,
            answers: [],
            timeLeft: 20,
            hintsUsed: { fiftyFifty: 3, extraTime: 3, fact: 3 },
            hintsAtQuestionStart: { fiftyFifty: 3, extraTime: 3, fact: 3 },
            gameMode: 'single',
            timer: null,
            questionStartTime: 0,
            selectedAnswer: null,
            showResult: false,
            hiddenAnswers: new Set(),
            showFact: false
        };

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—É–Ω–¥–æ–≤
        const roundTimeouts = [20, 18, 16, 14, 12];
        const roundMultipliers = [1.0, 1.3, 1.6, 2.0, 2.5];

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        let questions = JSON.parse(localStorage.getItem('tvQuizQuestions')) || defaultQuestions;
        let leaderboard = JSON.parse(localStorage.getItem('tvQuizLeaderboard')) || [];

        // –†–µ–¥–∞–∫—Ç–æ—Ä
        let selectedRound = 1;

        // –§—É–Ω–∫—Ü–∏—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è HTML –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS
        function escapeHTML(s) {
            return String(s).replace(/[&<>"']/g, m => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;'
            }[m]));
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function totalQuestionsAvailable() {
            let t = 0;
            for (let r = 1; r <= 5; r++) {
                t += (questions[r]?.length || 0);
            }
            return t;
        }

        function currentQuestionIndex() {
            let idx = 0;
            for (let r = 1; r < gameState.currentRound; r++) {
                idx += (questions[r]?.length || 0);
            }
            return idx + gameState.currentQuestion + 1;
        }

        // –î–µ–ª–∞–µ–º –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –¥–ª—è onclick-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
        window.showScreen = showScreen;
        window.startGame = startGame;
        window.selectAnswer = selectAnswer;
        window.useHint = useHint;
        window.restartGame = restartGame;
        window.selectRound = selectRound;
        window.addQuestion = addQuestion;
        window.deleteQuestion = deleteQuestion;
        window.saveQuestions = saveQuestions;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
            
            // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Service Worker –¥–ª—è PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('data:application/javascript;base64,' + btoa(`
                    const CACHE_NAME = 'tv-quiz-v1';
                    const urlsToCache = ['./', 'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap'];
                    
                    self.addEventListener('install', event => {
                        event.waitUntil(caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache)));
                    });
                    
                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request).then(response => response || fetch(event.request))
                        );
                    });
                `)).then(registration => {
                    console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration.scope);
                }).catch(error => {
                    console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                });
            }
            
            // –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                showInstallButton();
            });
            
            function showInstallButton() {
                // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                const installBtn = document.createElement('button');
                installBtn.innerHTML = 'üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ';
                installBtn.className = 'btn btn-primary';
                installBtn.style.position = 'fixed';
                installBtn.style.bottom = '20px';
                installBtn.style.right = '20px';
                installBtn.style.zIndex = '1000';
                installBtn.style.fontSize = '14px';
                installBtn.style.padding = '12px 16px';
                
                installBtn.addEventListener('click', () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ');
                            }
                            deferredPrompt = null;
                            installBtn.remove();
                        });
                    }
                });
                
                document.body.appendChild(installBtn);
                
                // –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –µ—Å–ª–∏ –Ω–µ –Ω–∞–∂–∞–ª–∏
                setTimeout(() => {
                    if (installBtn.parentNode) {
                        installBtn.remove();
                    }
                }, 10000);
            }
            
            showScreen('welcome');
            
            // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –ª–∏–¥–µ—Ä–æ–≤
            const clearBtn = document.getElementById('clear-leaderboard-btn');
            if (clearBtn) {
                clearBtn.addEventListener('click', function() {
                    console.log('–ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∞');
                    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤?')) {
                        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—á–∏—Å—Ç–∫—É');
                        leaderboard = [];
                        localStorage.removeItem('tvQuizLeaderboard');
                        updateLeaderboard();
                        alert('–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –æ—á–∏—â–µ–Ω–∞!');
                        console.log('–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –æ—á–∏—â–µ–Ω–∞');
                    } else {
                        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –æ—á–∏—Å—Ç–∫—É');
                    }
                });
                console.log('–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏–≤—è–∑–∞–Ω');
            } else {
                console.error('–ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ª–∏–¥–µ—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const savedLeaderboard = localStorage.getItem('tvQuizLeaderboard');
            if (savedLeaderboard) {
                try {
                    leaderboard = JSON.parse(savedLeaderboard);
                    console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤:', leaderboard.length, '–∑–∞–ø–∏—Å–µ–π');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤:', e);
                    leaderboard = [];
                }
            }
            
            const savedQuestions = localStorage.getItem('tvQuizQuestions');
            if (savedQuestions) {
                try {
                    questions = JSON.parse(savedQuestions);
                    console.log('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:', e);
                    questions = defaultQuestions;
                }
            }
            
            updateRoundButtons();
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω
        function showScreen(screenName) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenName + '-screen').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
            if (screenName === 'leaderboard') {
                updateLeaderboard();
            } else if (screenName === 'editor') {
                updateRoundButtons();
                updateQuestionsList();
                updateRoundTitle();
            }
        }

        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        function startGame(mode) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤–æ–æ–±—â–µ –≤–æ–ø—Ä–æ—Å—ã
            if (totalQuestionsAvailable() === 0) {
                alert('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤! –î–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.');
                return;
            }
            
            // –ù–∞–π—Ç–∏ –ø–µ—Ä–≤—ã–π —Ä–∞—É–Ω–¥ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
            let firstRound = 1;
            while (firstRound <= 5 && (!questions[firstRound] || questions[firstRound].length === 0)) {
                firstRound++;
            }
            
            if (firstRound > 5) {
                alert('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤! –î–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.');
                return;
            }
            
            gameState = {
                currentRound: firstRound,
                currentQuestion: 0,
                score: 0,
                answers: [],
                timeLeft: 20,
                hintsUsed: { fiftyFifty: 3, extraTime: 3, fact: 3 },
                hintsAtQuestionStart: { fiftyFifty: 3, extraTime: 3, fact: 3 },
                gameMode: mode,
                timer: null,
                questionStartTime: 0,
                selectedAnswer: null,
                showResult: false,
                hiddenAnswers: new Set(),
                showFact: false
            };
            
            showScreen('game');
            loadQuestion();
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å
        function loadQuestion() {
            const currentQuestions = questions[gameState.currentRound] || [];
            const currentQuestion = currentQuestions[gameState.currentQuestion];
            
            if (!currentQuestion) {
                alert('–í–æ–ø—Ä–æ—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è —ç—Ç–æ–≥–æ —Ä–∞—É–Ω–¥–∞!');
                showScreen('welcome');
                return;
            }

            // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
            gameState.selectedAnswer = null;
            gameState.showResult = false;
            gameState.hiddenAnswers = new Set();
            gameState.showFact = false;
            gameState.timeLeft = roundTimeouts[gameState.currentRound - 1];
            gameState.questionStartTime = Date.now();

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            updateGameUI();
            
            // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –≤ –Ω–∞—á–∞–ª–µ –≤–æ–ø—Ä–æ—Å–∞
            gameState.hintsAtQuestionStart = {...gameState.hintsUsed};
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–ø—Ä–æ—Å
            document.getElementById('question-text').textContent = currentQuestion.—Ç–µ–∫—Å—Ç;
            
            // –°–æ–∑–¥–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
            const container = document.getElementById('answers-container');
            container.innerHTML = '';
            
            currentQuestion.–≤–∞—Ä–∏–∞–Ω—Ç—ã.forEach((variant, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.innerHTML = `<span style="color: #60A5FA; font-weight: 700; margin-right: 12px;">${String.fromCharCode(65 + index)}.</span>${escapeHTML(variant)}`;
                button.onclick = () => selectAnswer(index);
                button.id = `answer-${index}`;
                button.disabled = false; // –Ø–≤–Ω–æ –≤–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É
                container.appendChild(button);
            });

            // –°–∫—Ä—ã—Ç—å —Ñ–∞–∫—Ç—ã
            document.getElementById('fact-box').style.display = 'none';
            document.getElementById('result-fact').style.display = 'none';

            // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
            startTimer();
        }

        // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
        function startTimer() {
            if (gameState.timer) {
                clearInterval(gameState.timer);
            }
            
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    selectAnswer(-1); // –í—Ä–µ–º—è –≤—ã—à–ª–æ
                }
            }, 1000);
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
        function updateTimerDisplay() {
            const timerDisplay = document.getElementById('timer-display');
            timerDisplay.textContent = gameState.timeLeft + '—Å';
            
            if (gameState.timeLeft <= 5) {
                timerDisplay.classList.add('warning');
            } else {
                timerDisplay.classList.remove('warning');
            }
        }

        // –í—ã–±—Ä–∞—Ç—å –æ—Ç–≤–µ—Ç
        function selectAnswer(answerIndex) {
            if (gameState.showResult) return;
            
            clearInterval(gameState.timer);
            gameState.selectedAnswer = answerIndex;
            gameState.showResult = true;
            
            const currentQuestions = questions[gameState.currentRound] || [];
            const currentQuestion = currentQuestions[gameState.currentQuestion];
            const isCorrect = answerIndex === currentQuestion.–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π;
            
            // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
            document.querySelectorAll('.answer-btn').forEach((btn, index) => {
                btn.disabled = true; // –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏
                
                if (index === currentQuestion.–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π) {
                    btn.classList.add('correct');
                } else if (index === answerIndex && !isCorrect) {
                    btn.classList.add('incorrect');
                } else {
                    // –û–±—ã—á–Ω—ã–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–µ—Ä—ã–º–∏
                    btn.style.opacity = '0.6';
                }
            });

            // –ü–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤
            const timeSpent = (Date.now() - gameState.questionStartTime) / 1000;
            const speedMultiplier = Math.max(0.5, 2 - (timeSpent / roundTimeouts[gameState.currentRound - 1]));
            const roundMultiplier = roundMultipliers[gameState.currentRound - 1];
            
            let points = 0;
            if (isCorrect) {
                points = Math.round(100 * speedMultiplier * roundMultiplier);
                // –®—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                const hintsUsedCount = (3 - gameState.hintsUsed.fiftyFifty) + 
                                     (3 - gameState.hintsUsed.extraTime) + 
                                     (3 - gameState.hintsUsed.fact);
                if (hintsUsedCount > 0) {
                    points = Math.round(points * 0.8);
                }
            }
            
            // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç
            const answer = {
                question: currentQuestion.—Ç–µ–∫—Å—Ç,
                selectedAnswer: answerIndex >= 0 ? currentQuestion.–≤–∞—Ä–∏–∞–Ω—Ç—ã[answerIndex] : "–í—Ä–µ–º—è –≤—ã—à–ª–æ",
                correctAnswer: currentQuestion.–≤–∞—Ä–∏–∞–Ω—Ç—ã[currentQuestion.–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π],
                isCorrect,
                points,
                timeSpent
            };
            
            gameState.answers.push(answer);
            gameState.score += points;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–∫—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–∫–∞–∑–∫—É
            if (currentQuestion.—Ñ–∞–∫—Ç && !gameState.showFact) {
                document.getElementById('result-fact-text').textContent = currentQuestion.—Ñ–∞–∫—Ç;
                document.getElementById('result-fact').style.display = 'block';
            }
            
            updateGameUI();
            
            // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
            setTimeout(() => {
                nextQuestion();
            }, 3000);
        }

        // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
        function nextQuestion() {
            const currentRoundQuestions = questions[gameState.currentRound] || [];
            
            if (gameState.currentQuestion < currentRoundQuestions.length - 1) {
                // –ï—Å—Ç—å –µ—â—ë –≤–æ–ø—Ä–æ—Å—ã –≤ —Ç–µ–∫—É—â–µ–º —Ä–∞—É–Ω–¥–µ
                gameState.currentQuestion++;
                loadQuestion();
            } else {
                // –ò—â–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
                let nextRound = gameState.currentRound + 1;
                while (nextRound <= 5 && (!questions[nextRound] || questions[nextRound].length === 0)) {
                    nextRound++;
                }
                
                if (nextRound <= 5) {
                    // –ù–∞–π–¥–µ–Ω —Ä–∞—É–Ω–¥ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
                    gameState.currentRound = nextRound;
                    gameState.currentQuestion = 0;
                    loadQuestion();
                } else {
                    // –ë–æ–ª—å—à–µ –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ - –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã
                    endGame();
                }
            }
        }

        // –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É
        function endGame() {
            clearInterval(gameState.timer);
            
            const correctAnswers = gameState.answers.filter(a => a.isCorrect).length;
            const totalTime = gameState.answers.reduce((sum, a) => sum + a.timeSpent, 0);
            const avgTime = totalTime / gameState.answers.length;
            
            const result = {
                score: gameState.score,
                accuracy: Math.round((correctAnswers / gameState.answers.length) * 100),
                avgTime: Math.round(avgTime * 10) / 10,
                date: new Date().toLocaleDateString('ru-RU'),
                answers: gameState.answers
            };
            
            // –î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤
            leaderboard.push(result);
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard = leaderboard.slice(0, 10);
            localStorage.setItem('tvQuizLeaderboard', JSON.stringify(leaderboard));
            
            showResults();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        function showResults() {
            const correctAnswers = gameState.answers.filter(a => a.isCorrect).length;
            const totalQuestions = gameState.answers.length;
            const accuracy = Math.round((correctAnswers / totalQuestions) * 100);
            const totalTime = gameState.answers.reduce((sum, a) => sum + a.timeSpent, 0);
            const avgTime = Math.round(totalTime * 10) / 10;

            document.getElementById('final-score').textContent = gameState.score.toLocaleString();
            document.getElementById('correct-answers').textContent = `${correctAnswers}/${totalQuestions}`;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            document.getElementById('avg-time').textContent = `${avgTime}—Å`;

            // –î–µ—Ç–∞–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤
            const container = document.getElementById('answers-details');
            container.innerHTML = '';
            
            gameState.answers.forEach((answer, index) => {
                const div = document.createElement('div');
                div.className = 'question-item';
                div.style.background = answer.isCorrect ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)';
                
                div.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 8px;">${escapeHTML(answer.question)}</div>
                    <div style="color: #D1D5DB; font-size: 14px; margin-bottom: 4px;">
                        –í–∞—à –æ—Ç–≤–µ—Ç: ${escapeHTML(String(answer.selectedAnswer))}
                        ${!answer.isCorrect ? ` | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π: ${escapeHTML(String(answer.correctAnswer))}` : ''}
                    </div>
                    <div style="color: #9CA3AF; font-size: 12px;">
                        –í—Ä–µ–º—è: ${answer.timeSpent.toFixed(1)}—Å | –û—á–∫–∏: ${answer.points}
                    </div>
                `;
                
                container.appendChild(div);
            });

            showScreen('results');
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É
        function restartGame() {
            // –ù–∞–π—Ç–∏ –ø–µ—Ä–≤—ã–π —Ä–∞—É–Ω–¥ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
            let firstRound = 1;
            while (firstRound <= 5 && (!questions[firstRound] || questions[firstRound].length === 0)) {
                firstRound++;
            }
            
            if (firstRound > 5) {
                alert('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤! –î–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.');
                showScreen('welcome');
                return;
            }
            
            gameState = {
                currentRound: firstRound,
                currentQuestion: 0,
                score: 0,
                answers: [],
                timeLeft: 20,
                hintsUsed: { fiftyFifty: 3, extraTime: 3, fact: 3 },
                hintsAtQuestionStart: { fiftyFifty: 3, extraTime: 3, fact: 3 },
                gameMode: gameState.gameMode,
                timer: null,
                questionStartTime: 0,
                selectedAnswer: null,
                showResult: false,
                hiddenAnswers: new Set(),
                showFact: false
            };
            
            showScreen('game');
            loadQuestion();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã
        function updateGameUI() {
            document.getElementById('round-display').textContent = `${gameState.currentRound}/5`;
            document.getElementById('question-display').textContent = `${gameState.currentQuestion + 1}/${questions[gameState.currentRound]?.length || 0}`;
            document.getElementById('score-display').textContent = gameState.score.toLocaleString();
            
            // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            const total = totalQuestionsAvailable();
            const pct = total > 0 ? Math.min(100, Math.round(currentQuestionIndex() / total * 100)) : 0;
            document.getElementById('progress-fill').style.width = pct + '%';
            
            // –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏
            document.getElementById('fifty-count').textContent = gameState.hintsUsed.fiftyFifty;
            document.getElementById('time-count').textContent = gameState.hintsUsed.extraTime;
            document.getElementById('fact-count').textContent = gameState.hintsUsed.fact;
            
            // –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫
            const fiftyBtn = document.getElementById('hint-fifty');
            const timeBtn = document.getElementById('hint-time');
            const factBtn = document.getElementById('hint-fact');
            
            fiftyBtn.disabled = gameState.hintsUsed.fiftyFifty <= 0 || gameState.showResult;
            timeBtn.disabled = gameState.hintsUsed.extraTime <= 0 || gameState.showResult;
            factBtn.disabled = gameState.hintsUsed.fact <= 0 || gameState.showResult;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
            if (fiftyBtn.disabled) {
                fiftyBtn.style.opacity = '0.5';
                fiftyBtn.style.cursor = 'not-allowed';
            } else {
                fiftyBtn.style.opacity = '1';
                fiftyBtn.style.cursor = 'pointer';
            }
            
            if (timeBtn.disabled) {
                timeBtn.style.opacity = '0.5';
                timeBtn.style.cursor = 'not-allowed';
            } else {
                timeBtn.style.opacity = '1';
                timeBtn.style.cursor = 'pointer';
            }
            
            if (factBtn.disabled) {
                factBtn.style.opacity = '0.5';
                factBtn.style.cursor = 'not-allowed';
            } else {
                factBtn.style.opacity = '1';
                factBtn.style.cursor = 'pointer';
            }
            
            updateTimerDisplay();
        }

        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É
        function useHint(hintType) {
            if (gameState.hintsUsed[hintType] <= 0 || gameState.showResult) return;
            
            gameState.hintsUsed[hintType]--;
            
            const currentQuestions = questions[gameState.currentRound] || [];
            const currentQuestion = currentQuestions[gameState.currentQuestion];
            
            switch (hintType) {
                case 'fiftyFifty': {
                    const correct = currentQuestion.–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π;
                    const pool = [0, 1, 2, 3].filter(i => i !== correct && !gameState.hiddenAnswers.has(i));
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è
                    if (pool.length < 2) {
                        console.warn('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ 50/50');
                        return;
                    }
                    
                    // –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –º–∞—Å—Å–∏–≤ (–∞–ª–≥–æ—Ä–∏—Ç–º –§–∏—à–µ—Ä–∞-–ô–µ–π—Ç—Å–∞) –∏ –≤–∑—è—Ç—å 2
                    for (let i = pool.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [pool[i], pool[j]] = [pool[j], pool[i]];
                    }
                    const toHide = pool.slice(0, 2);
                    toHide.forEach(i => {
                        const btn = document.getElementById(`answer-${i}`);
                        if (btn) {
                            btn.classList.add('hidden');
                            btn.disabled = true;
                            btn.style.opacity = '0.3';
                            btn.style.cursor = 'not-allowed';
                            gameState.hiddenAnswers.add(i);
                        }
                    });
                    break;
                }
                    
                case 'extraTime':
                    gameState.timeLeft += 5;
                    break;
                    
                case 'fact':
                    if (currentQuestion.—Ñ–∞–∫—Ç) {
                        gameState.showFact = true;
                        document.getElementById('fact-text').textContent = currentQuestion.—Ñ–∞–∫—Ç;
                        document.getElementById('fact-box').style.display = 'block';
                    }
                    break;
            }
            
            updateGameUI();
        }

        // –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤
        function updateLeaderboard() {
            const container = document.getElementById('leaderboard-list');
            if (!container) {
                console.error('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä leaderboard-list –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }
            
            container.innerHTML = '';
            
            if (leaderboard.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; color: #9CA3AF; padding: 48px 0;">
                        <div style="font-size: 64px; margin-bottom: 16px;">üèÅ</div>
                        <div style="font-size: 24px;">–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –∏–≥—Ä–∞–ª</div>
                        <div style="color: #6B7280;">–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</div>
                    </div>
                `;
                return;
            }
            
            leaderboard.forEach((result, index) => {
                const div = document.createElement('div');
                div.className = 'leaderboard-item';
                
                if (index === 0) div.classList.add('gold');
                else if (index === 1) div.classList.add('silver');
                else if (index === 2) div.classList.add('bronze');
                
                const emoji = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`;
                
                div.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="font-size: 32px; font-weight: 700; width: 60px; text-align: center;">${emoji}</div>
                        <div>
                            <div style="font-weight: 700; font-size: 24px;">${result.score.toLocaleString()} –æ—á–∫–æ–≤</div>
                            <div style="color: #D1D5DB; font-size: 14px;">
                                –¢–æ—á–Ω–æ—Å—Ç—å: ${result.accuracy}% | –°—Ä. –≤—Ä–µ–º—è: ${result.avgTime}—Å
                            </div>
                            <div style="color: #9CA3AF; font-size: 12px;">${result.date}</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ª–∏–¥–µ—Ä–æ–≤
        window.clearLeaderboard = function() {
            console.log('–§—É–Ω–∫—Ü–∏—è clearLeaderboard –≤—ã–∑–≤–∞–Ω–∞');
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤?')) {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –æ—á–∏—Å—Ç–∫—É');
                leaderboard = [];
                localStorage.removeItem('tvQuizLeaderboard');
                updateLeaderboard();
                alert('–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –æ—á–∏—â–µ–Ω–∞!');
                console.log('–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –æ—á–∏—â–µ–Ω–∞');
            } else {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –æ—á–∏—Å—Ç–∫—É');
            }
        };

        // –†–µ–¥–∞–∫—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
        function selectRound(round) {
            selectedRound = round;
            updateRoundButtons();
            updateQuestionsList();
            updateRoundTitle();
        }

        function updateRoundButtons() {
            for (let i = 1; i <= 5; i++) {
                const btn = document.getElementById(`round-${i}`);
                const count = questions[i] ? questions[i].length : 0;
                btn.textContent = `–†–∞—É–Ω–¥ ${i} (${count})`;
                
                if (i === selectedRound) {
                    btn.style.background = '#60A5FA';
                } else {
                    btn.style.background = '#6B7280';
                }
            }
        }

        function updateRoundTitle() {
            const titles = {
                1: '–†–∞—É–Ω–¥ 1 ‚Äî –õ—ë–≥–∫–∏–π',
                2: '–†–∞—É–Ω–¥ 2 ‚Äî –°—Ä–µ–¥–Ω–∏–π', 
                3: '–†–∞—É–Ω–¥ 3 ‚Äî –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π',
                4: '–†–∞—É–Ω–¥ 4 ‚Äî –°–ª–æ–∂–Ω—ã–π',
                5: '–†–∞—É–Ω–¥ 5 ‚Äî –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π'
            };
            document.getElementById('round-title').textContent = titles[selectedRound];
        }

        function updateQuestionsList() {
            const container = document.getElementById('questions-list');
            container.innerHTML = '';
            
            const roundQuestions = questions[selectedRound] || [];
            
            if (roundQuestions.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #9CA3AF; padding: 32px 0;">–í–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>';
                return;
            }
            
            roundQuestions.forEach((question, index) => {
                const div = document.createElement('div');
                div.className = 'question-item';
                
                div.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 8px;">${escapeHTML(question.—Ç–µ–∫—Å—Ç)}</div>
                    <div style="color: #D1D5DB; font-size: 14px; margin-bottom: 8px;">
                        ${question.–≤–∞—Ä–∏–∞–Ω—Ç—ã.map((variant, vIndex) => 
                            `<div style="${vIndex === question.–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ? 'color: #34D399; font-weight: 600;' : ''}">${String.fromCharCode(65 + vIndex)}. ${escapeHTML(variant)}</div>`
                        ).join('')}
                    </div>
                    ${question.—Ñ–∞–∫—Ç ? `<div style="color: #93C5FD; font-size: 12px; margin-bottom: 8px;">üí° ${escapeHTML(question.—Ñ–∞–∫—Ç)}</div>` : ''}
                    <button class="btn btn-danger" onclick="deleteQuestion(${index})" style="padding: 4px 12px; font-size: 12px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                `;
                
                container.appendChild(div);
            });
        }

        function addQuestion() {
            const text = document.getElementById('new-question-text').value.trim();
            const options = [
                document.getElementById('option-0').value.trim(),
                document.getElementById('option-1').value.trim(),
                document.getElementById('option-2').value.trim(),
                document.getElementById('option-3').value.trim()
            ];
            const fact = document.getElementById('new-question-fact').value.trim();
            const correct = parseInt(document.querySelector('input[name="correct"]:checked').value);
            
            if (!text || options.some(opt => !opt)) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            const newQuestion = {
                —Ç–µ–∫—Å—Ç: text,
                –≤–∞—Ä–∏–∞–Ω—Ç—ã: options,
                –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: correct,
                —Ñ–∞–∫—Ç: fact || undefined
            };
            
            if (!questions[selectedRound]) {
                questions[selectedRound] = [];
            }
            
            questions[selectedRound].push(newQuestion);
            
            // –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
            document.getElementById('new-question-text').value = '';
            document.getElementById('option-0').value = '';
            document.getElementById('option-1').value = '';
            document.getElementById('option-2').value = '';
            document.getElementById('option-3').value = '';
            document.getElementById('new-question-fact').value = '';
            document.querySelector('input[name="correct"][value="0"]').checked = true;
            
            updateRoundButtons();
            updateQuestionsList();
        }

        function deleteQuestion(index) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å?')) {
                questions[selectedRound].splice(index, 1);
                updateRoundButtons();
                updateQuestionsList();
            }
        }

        function saveQuestions() {
            localStorage.setItem('tvQuizQuestions', JSON.stringify(questions));
            alert('–í–æ–ø—Ä–æ—Å—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }
    </script>
</body>
</html>